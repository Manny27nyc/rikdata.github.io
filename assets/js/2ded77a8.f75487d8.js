"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7619],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),h=i,f=d["".concat(s,".").concat(h)]||d[h]||p[h]||r;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1159:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var a=n(7462),i=n(3366),r=(n(7294),n(3905)),o=["components"],l={id:"client",title:"Client Customization",sidebar_label:"Client"},s=void 0,u={unversionedId:"customization/client",id:"customization/client",title:"Client Customization",description:"OneApp is a flexible application, and you can map various business requirements using correct configurations. However, in case of any unique requirements, the application also provides well-structured JavaScript APIs that you can use to customize the application. You can customize the application either on the server side (an application that uses RikData Rest Builder) or on the client-side.",source:"@site/docs/customization/client.md",sourceDirName:"customization",slug:"/customization/client",permalink:"/docs/customization/client",draft:!1,editUrl:"https://github.com/rikdata/rikdata.github.io/edit/main/docs/customization/client.md",tags:[],version:"current",frontMatter:{id:"client",title:"Client Customization",sidebar_label:"Client"},sidebar:"mySidebar",previous:{title:"Server",permalink:"/docs/customization/server"},next:{title:"Custom Application",permalink:"/docs/customization/custom-application"}},c={},p=[{value:"Triggers/Connection Points",id:"triggersconnection-points",level:2},{value:"Global Methods",id:"global-methods",level:2},{value:"REST",id:"rest",level:3},{value:"Return Data",id:"return-data",level:3},{value:"JavaScript Config URL",id:"javascript-config-url",level:2},{value:"Examples",id:"examples",level:2},{value:"getRequest",id:"getrequest",level:3},{value:"Validate a field",id:"validate-a-field",level:3},{value:"Validate field and return an error",id:"validate-field-and-return-an-error",level:3}],d={toc:p};function h(e){var t=e.components,n=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"OneApp is a flexible application, and you can map various business requirements using correct configurations. However, in case of any unique requirements, the application also provides well-structured JavaScript APIs that you can use to customize the application. You can customize the application either on the server side (an application that uses RikData Rest Builder) or on the client-side."),(0,r.kt)("p",null,"This document provides examples of how to customize the application on the client-side using JavaScript. You can use this approach to change the functionality of the Mobile/Desktop app. However, if you are using OneApp REST, try to use server-side customization as that provides more options and flexibility."),(0,r.kt)("p",null,"On the client-side, the application provides eight connection/trigger points and 5 Global Methods."),(0,r.kt)("h2",{id:"triggersconnection-points"},"Triggers/Connection Points"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"beforeGet : Called before Get requests "),(0,r.kt)("li",{parentName:"ul"},"afterGet : Called after Get requests"),(0,r.kt)("li",{parentName:"ul"},"beforePatch : Called before Patch requests"),(0,r.kt)("li",{parentName:"ul"},"afterPatch : Called after Patch requests"),(0,r.kt)("li",{parentName:"ul"},"beforePost : Called before Post requests"),(0,r.kt)("li",{parentName:"ul"},"afterPost : Called after Post requests"),(0,r.kt)("li",{parentName:"ul"},"beforeDelete : Called before Delete requests"),(0,r.kt)("li",{parentName:"ul"},"afterDelete : Called after Delete requests")),(0,r.kt)("p",null,"The function definitions use the underlying programming conventions, i.e., Golang on the server side and Dart on the client side. Thus beforeGet on the client side is BeforeGet on the server side. However, you can use beforeGet/BeforeGet on the client side."),(0,r.kt)("h2",{id:"global-methods"},"Global Methods"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"consoleLog")),(0,r.kt)("h3",{id:"rest"},"REST"),(0,r.kt)("p",null,"Can be used for either internal or external application"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"restGet"),(0,r.kt)("li",{parentName:"ul"},"restPost"),(0,r.kt)("li",{parentName:"ul"},"restPatch"),(0,r.kt)("li",{parentName:"ul"},"restDelete")),(0,r.kt)("h3",{id:"return-data"},"Return Data"),(0,r.kt)("p",null,"You can return three types of values from your custom function"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"bool:  "),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"true - proceed with the request"),(0,r.kt)("li",{parentName:"ul"},"false - stop the request"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"object with rikProceedFlag and message elements:\nUse this approach to stop any action and show an error message to the user\nEx : "))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    let retMessage = {\n      'rikProceedFlag' : false,\n      'message' : 'No of free days must be less than 2'\n    };\n    return retMessage;\n\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"object: add the object data to the other form data and show it to the user")),(0,r.kt)("h2",{id:"javascript-config-url"},"JavaScript Config URL"),(0,r.kt)("p",null,"The config details must be available on a server from where all the users can access it. If users use VPN to access any application, the javascript file server must be accessible in the same network/VPN."),(0,r.kt)("p",null,"The application fetches all the configuration details during the login process and uses them for all applicable entities and applications. "),(0,r.kt)("img",{src:"/images/ScreenShots/admin/customization/customization_01.png",width:"400"}),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("h3",{id:"getrequest"},"getRequest"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"First, define a function to fetch data using the getRequest method")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    // For illustration purpose, showing  all possible options\n    async function getOrgDetails(inputData){\n    //The rest URL can be the application URL or any external URLs\n    let host = 'http://localhost:8085/api/ierp/Org(orgId=1)';\n\n    //You can use any vanilla javascript objects/functions/logics\n    if(inputData['WorkCenterInternalID'] == '10000000'){\n        host = 'http://localhost:8085/api/ierp/Org(orgId=4)';\n    }\n    let data2={host:host};\n    let retData = await getRequest(JSON.stringify(data2));\n\n    return retData;\n    }\n\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Add the above function to the main method specifying the function trigger point.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\nfunction main() {\n  let allMethods = [\n    {\n      applicationCode: "OracleCloud",\n      entityPath: "user",\n      triggerPoint: "beforeGet",\n      jsFilePath: "http://localhost:8085/js/user.js",\n      jsMethodName: "validatePassword",\n    },\n    {\n      applicationCode: "OracleCloud",\n      entityPath: "user",\n      triggerPoint: "beforePost",\n      jsFilePath: "http://localhost:8085/js/user.js",\n      jsMethodName: "validatePassword",\n    },\n    {\n      applicationCode: "SapHanaCloud",\n      entityPath: "A_WorkCenterAllCapacity",\n      triggerPoint: "afterGet",\n      jsFilePath: "http://localhost:8085/mobile/sap.js",\n      jsMethodName: "getOrgDetails",\n    },\n    {\n      applicationCode: "OracleCloud",\n      entityPath: "cycleCountDefinitions",\n      triggerPoint: "afterGet",\n      jsFilePath: "http://localhost:8085/mobile/sap.js",\n      jsMethodName: "accessDenied",\n    },\n    {\n      applicationCode: "TimeSheet",\n      entityPath: "Activity",\n      triggerPoint: "beforePost",\n      jsFilePath: "http://localhost:8085/mobile/rent.js",\n      jsMethodName: "validateTotalTime",\n    },\n    {\n      applicationCode: "TimeSheet",\n      entityPath: "Activity",\n      triggerPoint: "beforePatch",\n      jsFilePath: "http://localhost:8085/mobile/rent.js",\n      jsMethodName: "validateTotalTime",\n    },\n    {\n      applicationCode: "TimeSheet",\n      entityPath: "Activity",\n      triggerPoint: "beforeDelete",\n      jsFilePath: "http://localhost:8085/mobile/rent.js",\n      jsMethodName: "validateActivityDelete",\n    },\n  ];\n\n  return allMethods;\n}\n\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"entityPath : The entity name Ex: A_WorkCenterAllCapacity"),(0,r.kt)("li",{parentName:"ul"},"applicationCode : Application to which the javaScript functionality is applicable"),(0,r.kt)("li",{parentName:"ul"},"triggerPoint : The trigger/call point"),(0,r.kt)("li",{parentName:"ul"},"jsFilePath : JavaScript file path"),(0,r.kt)("li",{parentName:"ul"},"jsMethodName: Function that is called for the entityPath at the triggerPoint from the jsFilePath file")),(0,r.kt)("p",null,"Users must specify the JavaScript Config URL in the client."),(0,r.kt)("h3",{id:"validate-a-field"},"Validate a field"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"async function accessDenied(inputData) {\n //Business logic use inputData or data fetched using getRequest\n if(inputData['num'] > 10 ){\n  return true;\n  }else{\n       return false;\n  }\n}\n\n")),(0,r.kt)("h3",{id:"validate-field-and-return-an-error"},"Validate field and return an error"),(0,r.kt)("p",null,"Below is an example of writing custom logic and returning a flag specifying to proceed or error message "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"async function validateTotalTime(inputData) {\n  let freeDays = 0;\n  for (key in inputData) {\n    if(key == 'freeDays'){\n      freeDays = parseInt(inputData[key]);\n    }\n  }\n\n  log(\"validateTotalTime in js_methods freeDays : \" + freeDays);\n\n  if(freeDays > 3){\n    return true;\n  }else{\n    let retMessage = {\n      'rikProceedFlag' : false,\n      'message' : 'No of free days must be greater than 3'\n    };\n    return retMessage;\n  }\n}\n\n")))}h.isMDXComponent=!0}}]);